{"version":3,"kind":"Notebook","sha256":"d2cc21530fe306571595df1ded6db4eceaa2dab93f7d4a0a1fb3fb26a7eb20dc","slug":"chapter09-sec04","location":"/chapter09/chapter09_sec04.md","dependencies":[],"frontmatter":{"title":"Übungen","kernelspec":{"name":"python3","display_name":"Python 3","language":"python"},"jupytext":{"formats":"ipynb,md:myst","text_representation":{"extension":".md","format_name":"myst","format_version":"0.13","jupytext_version":"1.15.2"}},"content_includes_title":false,"authors":[{"id":"Simone Gramsch","name":"Simone Gramsch"}],"open_access":true,"license":{"content":{"id":"CC-BY-NC-SA-4.0","url":"https://creativecommons.org/licenses/by-nc-sa/4.0/","name":"Creative Commons Attribution Non Commercial Share Alike 4.0 International","CC":true}},"github":"https://github.com/gramschs/book_ml4ing","numbering":{"title":{"offset":1}},"source_url":"https://github.com/gramschs/book_ml4ing/blob/main/chapter09/chapter09_sec04.md","edit_url":"https://github.com/gramschs/book_ml4ing/edit/main/chapter09/chapter09_sec04.md","exports":[{"format":"md","filename":"chapter09_sec04.md","url":"/book_ml4ing/build/chapter09_sec04-831c93635a5fe3b1c1d54ca44d791456.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Der California-Housing-Datensatz ist ein klassischer Datensatz für\nRegressionsaufgaben im maschinellen Lernen. Er wurde 1990 aus dem US-Census\nextrahiert und enthält Daten zu ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Ph2i9cmO8p"},{"type":"strong","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Wohnblöcken","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"qpEBTWBMYT"}],"key":"urVb2CFh3g"},{"type":"text","value":" in Kalifornien. Ein Wohnblock\nist eine statistische Einheit mit typischerweise 600-3000 Einwohnern. Die\nMerkmale sind Durchschnittswerte für alle Haushalte in diesem Block. Das Ziel\nist, den Median-Hauswert (in US-Dollar) vorherzusagen.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"ZVzOB1OApP"}],"key":"k3woPbkq2m"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Überblick über die Daten","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"hXhO61cYdQ"}],"key":"kt5U889xP0"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Laden Sie den Datensatz ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"Cn6TbjDEME"},{"type":"inlineCode","value":"california_housing_DE.csv","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"fqWswcDill"},{"type":"text","value":".","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"INnjJ9iiC0"}],"key":"R4Hiqno4Mx"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":28,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Welche Daten enthält der Datensatz?","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"htrxRInyeo"}],"key":"QnwE5RkiiF"}],"key":"clXafSRBJb"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Wie viele Datenpunkte und Merkmale gibt es?","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"tZ5IzWrghM"}],"key":"e26C4N76Ec"}],"key":"ML7jjZiMTm"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Sind die Daten vollständig?","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"C2bGnNRKt1"}],"key":"gO26TumFc2"}],"key":"XvLVHp5iI7"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Welche Datentypen haben die Merkmale?","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"ihhBhyzVfn"}],"key":"SYhyFqFDoR"}],"key":"dgP9PszTjY"},{"type":"listItem","spread":true,"position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Gibt es Merkmale mit unerwarteten Datentypen?","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"J1d9b18ZSe"}],"key":"t5Xxq3TJaW"}],"key":"ae6CQpq7BQ"}],"key":"sbZvkr1pSJ"}],"class":"tip","key":"kK7sO5vUPk"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Lösung","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"z2lobLNNWq"}],"key":"TzleGE1Ad7"},{"type":"code","lang":"python","value":"import pandas as pd\n\n# Laden der Daten und erste Informationen\ndaten = pd.read_csv('california_housing_DE.csv')\ndaten.info()\n\n# Check der Vollständigkeit\nprint(daten.isnull().sum())\n\n# Inhalt der ersten 10 Zeilen\ndaten.head(10)","position":{"start":{"line":38,"column":1},"end":{"line":50,"column":1}},"key":"RmmepMzmNq"},{"type":"paragraph","position":{"start":{"line":51,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"text","value":"Der Datensatz enthält 20.640 Datenpunkte (Wohnblöcke) mit 10 Merkmalen. Die Daten\nsind nicht vollständig, denn beim Merkmal Schlafzimmer fehlen 207 Einträge. Die\nübrigen Merkmale sind vollständig. Die Datentypen der Merkmale sind wie folgt:","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"dpAte667SJ"}],"key":"Drv9wqMnjJ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":55,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Laenge --> float64,","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"uQlDgMH0XG"}],"key":"VMGVtSrnGg"}],"key":"EeS0g8sQzI"},{"type":"listItem","spread":true,"position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Breite --> float64,","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"UT7oYQTWs5"}],"key":"vBE6NMI4qP"}],"key":"C5xLWuxeoe"},{"type":"listItem","spread":true,"position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Alter --> float64,","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"K8HCu4vOrw"}],"key":"TcfgCQzxtU"}],"key":"kJHEX93d9L"},{"type":"listItem","spread":true,"position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Zimmer --> float64,","position":{"start":{"line":58,"column":1},"end":{"line":58,"column":1}},"key":"RzDb5we0BU"}],"key":"q2CuBZb56P"}],"key":"aEix26QLW0"},{"type":"listItem","spread":true,"position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Schlafzimmer --> float64,","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"Sf8VkSM1ZY"}],"key":"d9gbVyrdS3"}],"key":"GprE4tB7Zg"},{"type":"listItem","spread":true,"position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Bevoelkerung --> float64,","position":{"start":{"line":60,"column":1},"end":{"line":60,"column":1}},"key":"Jtn5ruT8Kq"}],"key":"QWELfJOiMy"}],"key":"FllgpbMujp"},{"type":"listItem","spread":true,"position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Haushalte --> float64,","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"ZaCXkVOjQG"}],"key":"XLRFYDH0yK"}],"key":"iqqjdn8e5Q"},{"type":"listItem","spread":true,"position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Einkommen --> float64,","position":{"start":{"line":62,"column":1},"end":{"line":62,"column":1}},"key":"X1DB7HN01D"}],"key":"EzIn6GbJVJ"}],"key":"QimXtsSTFv"},{"type":"listItem","spread":true,"position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Hauswert --> float64 und","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"IxkpDhBmFC"}],"key":"f39OrGF8us"}],"key":"s0UIpeaQmR"},{"type":"listItem","spread":true,"position":{"start":{"line":64,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Kuestennaehe --> object.","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"LNBgxsNmez"}],"key":"IkaZkTRfYV"}],"key":"f8NAhUo2Vx"}],"key":"J28iTI5JNk"},{"type":"paragraph","position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"text","value":"Die Datentypen sind für die Merkmale angemessen.","position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"key":"qkNNQLeHgf"}],"key":"V0r80cK5qj"}],"class":"tip dropdown","key":"VSgynEH3yh"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Datenvorverarbeitung","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"RYCoUXQObg"}],"key":"GeJojpdIQW"},{"type":"paragraph","position":{"start":{"line":71,"column":1},"end":{"line":73,"column":1}},"children":[{"type":"text","value":"Der Datensatz enthält fehlende Werte in der Spalte ","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"fEfh7QdzaL"},{"type":"inlineCode","value":"Schlafzimmer","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"POZ8Ah8m2k"},{"type":"text","value":". Entscheiden\nSie, wie Sie diese behandeln möchten. Begründen Sie Ihre Wahl. Führen Sie die\ngewählte Methode durch.","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"CURGIHISpH"}],"key":"nTb5JGqU6u"}],"class":"tip","key":"hXJiHkh2Y9"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Lösung","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"P2NUXJMKQG"}],"key":"NXbo8G9aee"},{"type":"paragraph","position":{"start":{"line":79,"column":1},"end":{"line":82,"column":1}},"children":[{"type":"text","value":"Es fehlen 207 Werte (ca. 1 % des Datensatzes). Da es sich um eine numerische\nSpalte handelt und der Anteil der fehlenden Werte gering ist, ist eine\n","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"uWH07xqa0A"},{"type":"emphasis","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"text","value":"Imputation mit dem Median","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"FNJfqjt22L"}],"key":"HABQlAXzN4"},{"type":"text","value":" sinnvoll. Der Median ist robust gegenüber Ausreißern\nund verändert die Verteilung der Daten kaum.","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"DJ3fsevkn8"}],"key":"rQWDsOMZmE"},{"type":"paragraph","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"text","value":"Die Imputation führen wir wie folgt durch:","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"ifDNFW2viZ"}],"key":"TiT1XjSUCG"},{"type":"code","lang":"python","value":"# Median berechnen\nmedian_schlafzimmer = daten['Schlafzimmer'].median()\nprint(f'Median Schlafzimmer: {median_schlafzimmer:.1f} ')\n\n# fehlende Werte ersetzen\ndaten['Schlafzimmer'] = daten['Schlafzimmer'].fillna(median_schlafzimmer)\n\n# Überprüfen, ob keine fehlenden Werte mehr vorhanden sind\nprint(f\"Fehlende Werte nach Imputation: {daten['Schlafzimmer'].isna().sum()}\")","position":{"start":{"line":86,"column":1},"end":{"line":96,"column":1}},"key":"bZlDanvYwy"},{"type":"paragraph","position":{"start":{"line":97,"column":1},"end":{"line":98,"column":1}},"children":[{"type":"text","value":"Nach der Imputation sind keine fehlenden Werte mehr in der Spalte ","position":{"start":{"line":97,"column":1},"end":{"line":97,"column":1}},"key":"aI69f7aBKW"},{"type":"inlineCode","value":"Schlafzimmer","position":{"start":{"line":97,"column":1},"end":{"line":97,"column":1}},"key":"OZEMUOovqi"},{"type":"text","value":"\nvorhanden.","position":{"start":{"line":97,"column":1},"end":{"line":97,"column":1}},"key":"GfCVCjqS9p"}],"key":"wrJRNyfx2J"},{"type":"paragraph","position":{"start":{"line":100,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"text","value":"Alternativen wären: Zeilen löschen (bei nur 1 % vertretbar), Mittelwert (aber\nweniger robust) oder komplexere Imputation mit ML-Modellen (hier übertrieben\naufwendig).","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"key":"TXxShvd2e2"}],"key":"AKRCviBJQS"}],"class":"tip dropdown","key":"U6tzRx7MdZ"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Statistik der numerischen Daten","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"key":"jkJQUSD6wh"}],"key":"q5DW2DceZR"},{"type":"paragraph","position":{"start":{"line":107,"column":1},"end":{"line":109,"column":1}},"children":[{"type":"text","value":"Erstellen Sie eine Übersicht der statistischen Kennzahlen für die numerischen\nDaten. Interpretieren Sie die statistischen Kennzahlen. Gibt es Auffälligkeiten?\nSind die Werte plausibel?","position":{"start":{"line":107,"column":1},"end":{"line":107,"column":1}},"key":"osXyS7iqBw"}],"key":"cOIXviFM3Q"}],"class":"tip ","key":"dos4ruPsVp"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Lösung","position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"key":"zI1S3gxVPj"}],"key":"maCUUnku6z"},{"type":"code","lang":"python","value":"import plotly.express as px\n\n# Laenge, Breite wird weggelassen, da die Positionen weniger gut statistisch\n# interpretiert werden kann; Hauswert wird gesondert untersucht, da es die \n# Zielgröße ist \nfig = px.box(daten.loc[:, 'Alter':'Einkommen'],\n             labels={'variable': 'Merkmal', 'value': 'Wert'})\n\nfig.show()\n\n# Statistik für alle Merkmale und Zielgröße\ndaten.describe()","position":{"start":{"line":115,"column":1},"end":{"line":128,"column":1}},"key":"tDW41xUH92"},{"type":"paragraph","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"children":[{"type":"text","value":"Beobachtungen:","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"key":"ArIL23kRx2"}],"key":"QZ5auDEJKn"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":131,"column":1},"end":{"line":139,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Alter: reicht von 1 bis 52 Jahren, durchschnittlich 28.6 Jahre","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"dCey2ya3QA"}],"key":"DmD4kQRi9L"}],"key":"BFJHfSAY9P"},{"type":"listItem","spread":true,"position":{"start":{"line":132,"column":1},"end":{"line":133,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Zimmer: sehr große Spannweite (2 bis 39320), Median (2127) deutlich unter\nMittelwert (2635), d.h. rechtsschiefe Verteilung, Ausreißer vorhanden","position":{"start":{"line":132,"column":1},"end":{"line":132,"column":1}},"key":"lxAStI1UUo"}],"key":"x0n69txayI"}],"key":"WSPr5OxMhz"},{"type":"listItem","spread":true,"position":{"start":{"line":134,"column":1},"end":{"line":134,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Schlafzimmer: ähnliches Bild wie bei Zimmer","position":{"start":{"line":134,"column":1},"end":{"line":134,"column":1}},"key":"RSdXAb8XuF"}],"key":"SyuCpHLbE6"}],"key":"u5qRQ9riYD"},{"type":"listItem","spread":true,"position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Bevoelkerung: Maximum von 35682 deutet auf sehr große Bezirke hin","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"Ox8RWYiyhF"}],"key":"Q9ZzduQ0dY"}],"key":"PYNkAdAc07"},{"type":"listItem","spread":true,"position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Einkommen: reicht von 0.5 bis 15 (Einheit: 10.000 USD)","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"key":"XSwR2rKMqt"}],"key":"Z3MgnzpfG1"}],"key":"LEwhwOZ3xq"},{"type":"listItem","spread":true,"position":{"start":{"line":137,"column":1},"end":{"line":139,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Hauswert: Maximum von 500001 ist auffällig, vermutlich werden Werte über\n500.000 USD gekappt","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"cMMUX9zedb"}],"key":"g9gQo9oMAW"}],"key":"Eg4jGyF8AL"}],"key":"ap0bce4rW4"},{"type":"paragraph","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"children":[{"type":"text","value":"Die Werte erscheinen grundsätzlich plausibel, zeigen aber deutliche Ausreißer.","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"yWgeXpYRdt"}],"key":"zBXBLAwE9f"}],"class":"tip dropdown","key":"IRkcivfYjZ"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Statistik der kategorialen Merkmale","position":{"start":{"line":143,"column":1},"end":{"line":143,"column":1}},"key":"C6tpL4fUds"}],"key":"eTcCs3KZTD"},{"type":"paragraph","position":{"start":{"line":145,"column":1},"end":{"line":146,"column":1}},"children":[{"type":"text","value":"Wie viele Beobachtungen gibt es pro Kategorie in Küstennähe? Visualisieren\nSie die Verteilung mit einem Balkendiagramm. Ist der Datensatz ausgewogen?","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"nqKRMnbPhD"}],"key":"V46r4y26pD"}],"class":"tip ","key":"TsW12Fu15T"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Lösung","position":{"start":{"line":149,"column":1},"end":{"line":149,"column":1}},"key":"ujOSJHbr4c"}],"key":"agfUOjnEEI"},{"type":"code","lang":"python","value":"haeufigkeiten = daten['Kuestennaehe'].value_counts()\nprint(haeufigkeiten)\n\nfig = px.bar(x=haeufigkeiten.index, y=haeufigkeiten.values,\n             labels={'x': 'Küstennähe', 'y': 'Anzahl'},\n             title='Verteilung der Kuestennähe-Kategorien')\nfig.show()","position":{"start":{"line":152,"column":1},"end":{"line":160,"column":1}},"key":"jCfxtkPJlK"},{"type":"paragraph","position":{"start":{"line":161,"column":1},"end":{"line":164,"column":1}},"children":[{"type":"text","value":"Der Datensatz ist nicht ausgewogen. Die Kategorie ‘weniger_als_1h_zum_Ozean’\ndominiert mit über 9000 Einträgen, gefolgt von ‘Binnenland’ mit über 6000\nEinträgen. ‘nahe_Bucht’ und ‘nahe_Ozean’ haben deutlich weniger Einträge, und\n‘Insel’ ist mit nur 5 Beobachtungen extrem unterrepräsentiert.","position":{"start":{"line":161,"column":1},"end":{"line":161,"column":1}},"key":"SikdzZql2g"}],"key":"iNzxjnbgHc"}],"class":"tip dropdown","key":"gr2QJ3vn6U"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Analyse der Zielgröße","position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"key":"JlfmwS9xpH"}],"key":"rrEM1hqA6l"},{"type":"paragraph","position":{"start":{"line":169,"column":1},"end":{"line":170,"column":1}},"children":[{"type":"text","value":"Visualisieren Sie die Verteilung der Zielgröße ","position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"key":"oQHEv5DLlU"},{"type":"inlineCode","value":"Hauswert","position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"key":"cWfvQHzUzo"},{"type":"text","value":" mit einem\nHistogramm. Ist die Verteilung normalverteilt? Gibt es Auffälligkeiten?","position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"key":"eVnHxsKcu8"}],"key":"RmuBYJKJUb"}],"class":"tip ","key":"k177oRRDX2"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Lösung","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"bv6K8c9U64"}],"key":"zmZphgvQeZ"},{"type":"code","lang":"python","value":"fig = px.histogram(daten, x='Hauswert', \n                   nbins=50,\n                   title='Verteilung der Hauswerte')\nfig.update_layout(\n    yaxis_title='Anzahl',\n    xaxis_title='Hauswert (USD)'\n)\nfig.show()","position":{"start":{"line":176,"column":1},"end":{"line":185,"column":1}},"key":"foP22bHTnz"},{"type":"paragraph","position":{"start":{"line":186,"column":1},"end":{"line":189,"column":1}},"children":[{"type":"text","value":"Die Verteilung ist rechtsschief und nicht normalverteilt. Auffällig ist der\ngroße Balken bei 500.001 USD. Hier wurden offensichtlich alle Werte über 500.000\nUSD auf diesen Maximalwert gesetzt. Dies ist eine Besonderheit des Datensatzes,\ndie man bei der Interpretation der Ergebnisse berücksichtigen sollte.","position":{"start":{"line":186,"column":1},"end":{"line":186,"column":1}},"key":"eULKJ41iWr"}],"key":"YUfLCrl5rP"}],"class":"tip dropdown","key":"Y1PumuJnd2"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Korrelationen","position":{"start":{"line":192,"column":1},"end":{"line":192,"column":1}},"key":"hiMcuo5trn"}],"key":"HqMx9o1vXc"},{"type":"paragraph","position":{"start":{"line":194,"column":1},"end":{"line":196,"column":1}},"children":[{"type":"text","value":"Erstellen Sie eine Korrelationsmatrix für alle numerischen Variablen und\nvisualisieren Sie diese als Heatmap. Welche Merkmale korrelieren am stärksten\nmit dem Hauswert? Gibt es starke Korrelationen zwischen den Merkmalen?","position":{"start":{"line":194,"column":1},"end":{"line":194,"column":1}},"key":"xPP1lqhYkq"}],"key":"extZZFXHnz"}],"class":"tip","key":"owTnGfqg0f"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Lösung","position":{"start":{"line":199,"column":1},"end":{"line":199,"column":1}},"key":"eSJegn6guP"}],"key":"Umk6QyB3JW"},{"type":"code","lang":"python","value":"numerische_daten = daten.loc[:, 'Laenge' : 'Hauswert']\nkorrelation = numerische_daten.corr()\n\nfig = px.imshow(korrelation, \n                text_auto='.2f',\n                aspect='auto',\n                labels={'color': 'Korrelation'},\n                title='Korrelationsmatrix')\nfig.show()","position":{"start":{"line":202,"column":1},"end":{"line":212,"column":1}},"key":"EEqeQOtyrK"},{"type":"paragraph","position":{"start":{"line":213,"column":1},"end":{"line":214,"column":1}},"children":[{"type":"text","value":"Eine häufig verwendete Faustregel für die Interpretation des\nKorrelationskoeffizienten r ist","position":{"start":{"line":213,"column":1},"end":{"line":213,"column":1}},"key":"cxkOjN4s9O"}],"key":"gtVRiVyxxo"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":216,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":216,"column":1},"end":{"line":216,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"|r| < 0.3: schwacher Zusammenhang","position":{"start":{"line":216,"column":1},"end":{"line":216,"column":1}},"key":"q9pLxf2tQ8"}],"key":"Sw5CqtbDDV"}],"key":"jGgbVuzT8m"},{"type":"listItem","spread":true,"position":{"start":{"line":217,"column":1},"end":{"line":217,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"0.3 ≤ |r| < 0.7: mittelstarker Zusammenhang","position":{"start":{"line":217,"column":1},"end":{"line":217,"column":1}},"key":"vexHQ0LJB2"}],"key":"jyLa2vmx2J"}],"key":"s2Y9Yt8PfD"},{"type":"listItem","spread":true,"position":{"start":{"line":218,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"|r| ≥ 0.7: starker Zusammenhang","position":{"start":{"line":218,"column":1},"end":{"line":218,"column":1}},"key":"VO1o3GHoud"}],"key":"N3BhKTuy81"}],"key":"oQ9N7jr2pd"}],"key":"ppncVKc4XC"},{"type":"paragraph","position":{"start":{"line":220,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"text","value":"Das Einkommen korreliert am stärksten mit dem Hauswert (r = 0.69). Alle anderen\nMerkmale zeigen keine bzw. nur einen sehr schwachen Zusammenhang zum Hauswert\n(Werte zwischen -0.14 bis 0.13).","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"CP47fMAbDR"}],"key":"GQRyfcanKQ"},{"type":"paragraph","position":{"start":{"line":224,"column":1},"end":{"line":225,"column":1}},"children":[{"type":"text","value":"Bei den Merkmalen untereinander gibt es starke Korrelationen zwischen den\nZimmern, Schlafzimmern, Bevölkerung und Haushalten (0.86 bis 0.93).","position":{"start":{"line":224,"column":1},"end":{"line":224,"column":1}},"key":"ucWzl8ZCiN"}],"key":"NA6vcYYXnA"}],"class":"tip dropdown","key":"RMKDyGM3f3"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Analyse der Positionen","position":{"start":{"line":228,"column":1},"end":{"line":228,"column":1}},"key":"QE6UZXWUXv"}],"key":"HVjlGIRrcY"},{"type":"paragraph","position":{"start":{"line":230,"column":1},"end":{"line":232,"column":1}},"children":[{"type":"text","value":"Erstellen Sie einen Scatterplot mit Längengrad (x-Achse) und Breitengrad\n(y-Achse). Färben Sie die Punkte nach Hauswert ein. Erkennen Sie geografische\nMuster?","position":{"start":{"line":230,"column":1},"end":{"line":230,"column":1}},"key":"DOjxJGaU4C"}],"key":"h9P7iDA1Cm"},{"type":"paragraph","position":{"start":{"line":234,"column":1},"end":{"line":235,"column":1}},"children":[{"type":"text","value":"Tipp: Benutzen Sie das optionale Argument ","position":{"start":{"line":234,"column":1},"end":{"line":234,"column":1}},"key":"Xb1PVT4STT"},{"type":"inlineCode","value":"opacity=0.5","position":{"start":{"line":234,"column":1},"end":{"line":234,"column":1}},"key":"ZmUCqM971O"},{"type":"text","value":", damit knapp\nübereinanderliegende Punkte dennoch sichtbar werden.","position":{"start":{"line":234,"column":1},"end":{"line":234,"column":1}},"key":"M72TjjOI20"}],"key":"sWZbgrfrLX"}],"class":"tip","key":"ICmO1O4pk5"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Lösung","position":{"start":{"line":238,"column":1},"end":{"line":238,"column":1}},"key":"h6Ga3R0qb5"}],"key":"NY6OFJm1ns"},{"type":"code","lang":"python","value":"fig = px.scatter(daten, \n                 x='Laenge', \n                 y='Breite',\n                 color='Hauswert',\n                 labels={'Laenge': 'Längengrad',\n                        'Breite': 'Breitengrad',\n                        'Hauswert': 'Hauswert (USD)'},\n                 title='Geografische Verteilung der Hauswerte',\n                 opacity=0.5\n                )\nfig.show()","position":{"start":{"line":241,"column":1},"end":{"line":253,"column":1}},"key":"nxdtqNoTwE"},{"type":"paragraph","position":{"start":{"line":254,"column":1},"end":{"line":256,"column":1}},"children":[{"type":"text","value":"Die Form von Kalifornien ist deutlich erkennbar. Die höchsten Hauswerte sind in\nden Küstenregionen (Vergleich mit Atlas: San Francisco Bay Area und Los\nAngeles/San Diego). Im Binnenland sind die Hauswerte niedriger.","position":{"start":{"line":254,"column":1},"end":{"line":254,"column":1}},"key":"yoqjus6kKt"}],"key":"WI3TTiYK76"},{"type":"paragraph","position":{"start":{"line":258,"column":1},"end":{"line":261,"column":1}},"children":[{"type":"text","value":"Die geografische Lage ist ein wichtiger Einflussfaktor auf den Hauswert. Der\nEinfluss ist allerdings nichtlinear, denn sonst hätten wir in der\nKorrelationsmatrix nicht r = -0.05 für die Laenge und r = -0.14 für die Breite\nerhalten.","position":{"start":{"line":258,"column":1},"end":{"line":258,"column":1}},"key":"moBE4qw5yq"}],"key":"HlRxyJ5g8G"}],"class":"tip dropdown","key":"T5pc4mFO4n"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Neue Merkmale","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"FaJ2JotAab"}],"key":"vZNjO6PNUB"},{"type":"paragraph","position":{"start":{"line":266,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"Wir haben festgestellt, dass die Merkmale Zimmer, Schlafzimmer, Bevölkerung und\nHaushalte stark linear korreliert sind.","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"MQLLbz5QkA"}],"key":"MFtUiSNhdL"},{"type":"paragraph","position":{"start":{"line":269,"column":1},"end":{"line":269,"column":1}},"children":[{"type":"text","value":"Erstellen Sie folgende neue Merkmale:","position":{"start":{"line":269,"column":1},"end":{"line":269,"column":1}},"key":"eZTlpcEFXa"}],"key":"xQgOlDX1Mx"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":270,"column":1},"end":{"line":273,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":270,"column":1},"end":{"line":270,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Zimmer pro Haushalt","position":{"start":{"line":270,"column":1},"end":{"line":270,"column":1}},"key":"nBaj8i8dPM"}],"key":"Y6FuifPWwP"}],"key":"TaaX3OPRxp"},{"type":"listItem","spread":true,"position":{"start":{"line":271,"column":1},"end":{"line":271,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Schlafzimmer pro gesamte Anzahl Zimmer","position":{"start":{"line":271,"column":1},"end":{"line":271,"column":1}},"key":"uxKTY4NHii"}],"key":"ZjSdpbBBu0"}],"key":"OWKUfQUOaS"},{"type":"listItem","spread":true,"position":{"start":{"line":272,"column":1},"end":{"line":273,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Personen pro Haushalt","position":{"start":{"line":272,"column":1},"end":{"line":272,"column":1}},"key":"i9sc4F6QJu"}],"key":"hDLgRiDjRN"}],"key":"IuptdpBLBz"}],"key":"lDMQhIoybT"},{"type":"paragraph","position":{"start":{"line":274,"column":1},"end":{"line":275,"column":1}},"children":[{"type":"text","value":"Dürfen die drei Divisionen durchgeführt werden? Berechnen Sie die Korrelation\ndieser neuen Merkmale mit der Zielgröße.","position":{"start":{"line":274,"column":1},"end":{"line":274,"column":1}},"key":"TbnEHLTw48"}],"key":"KnmI35kkTy"}],"class":"tip","key":"dKQu38m1eB"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Lösung","position":{"start":{"line":278,"column":1},"end":{"line":278,"column":1}},"key":"so8RnevQv4"}],"key":"VYxDkO84vX"},{"type":"paragraph","position":{"start":{"line":281,"column":1},"end":{"line":283,"column":1}},"children":[{"type":"text","value":"Die statische Analyse ergab, dass das Minimum der Haushalte 1 ist und die\nminimale Anzahl der Zimmer 2. Null kommt nicht vor, so dass alle drei Divisionen\ndurchgeführt werden können.","position":{"start":{"line":281,"column":1},"end":{"line":281,"column":1}},"key":"bCKhgHdFrX"}],"key":"E2aAjWRp0W"},{"type":"code","lang":"python","value":"# Erstellung neue Merkmale als zusätzliche Spalten\ndaten['Zimmer_pro_Haushalt'] = daten['Zimmer'] / daten['Haushalte']\ndaten['Schlafzimmer_Anteil'] = daten['Schlafzimmer'] / daten['Zimmer']\ndaten['Personen_pro_Haushalt'] = daten['Bevoelkerung'] / daten['Haushalte']\n\n# Auswahl der Merkmale für Korrelationsmatrix\nneue_daten = daten.loc[:, ['Zimmer_pro_Haushalt', 'Schlafzimmer_Anteil', 'Personen_pro_Haushalt', 'Hauswert' ]]\n\n# Berechnung und Anzeige Korrelationsmatrix\nneue_korrelationen = neue_daten.corr()\nprint(neue_korrelationen)\n\n# Visualisierung Korrelationsmatrix als Heatmap\nfig = px.imshow(neue_korrelationen, \n                text_auto='.2f',\n                aspect='auto',\n                labels={'color': 'Korrelation'},\n                title='Neue Korrelationsmatrix')\nfig.show()","position":{"start":{"line":284,"column":1},"end":{"line":304,"column":1}},"key":"jjaoQ6SQYG"},{"type":"paragraph","position":{"start":{"line":305,"column":1},"end":{"line":307,"column":1}},"children":[{"type":"text","value":"Die neuen Merkmale zeigen stärkere Korrelationen als die ursprünglichen\nMerkmale. Besonders der ","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"ydzP3bGEdE"},{"type":"inlineCode","value":"Schlafzimmer_Anteil","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"P1e2k5uf8Q"},{"type":"text","value":" könnte ein nützliches Merkmal zur\nPrognose des Hauswertes sein.","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"rnIffcg4cl"}],"key":"CmcGV48Rpl"}],"class":"tip dropdown","key":"Eve59sNv6K"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Vorbereitung der Daten für das Training","position":{"start":{"line":310,"column":1},"end":{"line":310,"column":1}},"key":"kpLRyxhapF"}],"key":"IPwywFb5fh"},{"type":"paragraph","position":{"start":{"line":312,"column":1},"end":{"line":312,"column":1}},"children":[{"type":"text","value":"Bereiten Sie die Daten für das maschinelle Lernen vor:","position":{"start":{"line":312,"column":1},"end":{"line":312,"column":1}},"key":"jAaIJmE5Kg"}],"key":"xCuDStVthv"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":314,"column":1},"end":{"line":316,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":314,"column":1},"end":{"line":314,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Kodieren Sie die kategoriale Variable Küstennähe mit One-Hot-Encoding.","position":{"start":{"line":314,"column":1},"end":{"line":314,"column":1}},"key":"Ob87jbxUtk"}],"key":"jKjLr1YZuk"}],"key":"ujXRphEGiz"},{"type":"listItem","spread":true,"position":{"start":{"line":315,"column":1},"end":{"line":315,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Trennen Sie die Merkmale (Input X) und die Zielgröße (Output y).","position":{"start":{"line":315,"column":1},"end":{"line":315,"column":1}},"key":"qCujCJzkkp"}],"key":"XoV9L2QCfM"}],"key":"O9W6Xzlf7h"},{"type":"listItem","spread":true,"position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Teilen Sie die Daten in Trainings- und Testdaten im Verhältnis 80:20 auf.","position":{"start":{"line":316,"column":1},"end":{"line":316,"column":1}},"key":"XSn7f1Zla7"}],"key":"f2oqcl35lw"}],"key":"EsGn9uiPaW"}],"key":"xY5QMz4eWN"}],"class":"tip","key":"JKIa1T05bX"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Lösung","position":{"start":{"line":319,"column":1},"end":{"line":319,"column":1}},"key":"O1wyPxSlKX"}],"key":"cwGd4eFqkI"},{"type":"code","lang":"python","value":"from sklearn.model_selection import train_test_split\n\n# One-Hot-Encoding für Kuestennaehe\ndaten = pd.get_dummies(data=daten, columns=['Kuestennaehe'])\ndaten.head()\n\n# Input und Output trennen\nX = daten.drop('Hauswert', axis=1)\ny = daten['Hauswert']\n\n# Train-Test-Split\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)\n\nprint(f'Trainingsdaten: {X_train.shape[0]} Datenpunkte')\nprint(f'Testdaten: {X_test.shape[0]} Datenpunkte')\nprint(f'Anzahl Merkmale: {X_train.shape[1]}')","position":{"start":{"line":322,"column":1},"end":{"line":339,"column":1}},"key":"O7k8PABpF5"}],"class":"tip dropdown","key":"gOe3ORMIBg"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"ML-Modell: Entscheidungsbaum","position":{"start":{"line":342,"column":1},"end":{"line":342,"column":1}},"key":"CNYWFKxT0p"}],"key":"Zt7s8zhtf4"},{"type":"paragraph","position":{"start":{"line":344,"column":1},"end":{"line":346,"column":1}},"children":[{"type":"text","value":"Trainieren Sie einen Entscheidungsbaum (DecisionTreeRegressor) auf den\nTrainingsdaten. Berechnen Sie den R²-Score auf den Trainings- und Testdaten. Was\nfällt Ihnen auf?","position":{"start":{"line":344,"column":1},"end":{"line":344,"column":1}},"key":"HT5nJb9JMV"}],"key":"GLNncRhK4S"}],"class":"tip","key":"HaVpKYM5oO"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Lösung","position":{"start":{"line":349,"column":1},"end":{"line":349,"column":1}},"key":"vhqiJAsysh"}],"key":"aRLrJwtpWb"},{"type":"code","lang":"python","value":"from sklearn.tree import DecisionTreeRegressor\n\nmodell_baum = DecisionTreeRegressor(random_state=42)\nmodell_baum.fit(X_train, y_train)\n\nr2_train_baum = modell_baum.score(X_train, y_train)\nr2_test_baum = modell_baum.score(X_test, y_test)\n\nprint(f'R²-Score Entscheidungsbaum (Training): {r2_train_baum:.2f}')\nprint(f'R²-Score Entscheidungsbaum (Test): {r2_test_baum:.2f}')","position":{"start":{"line":352,"column":1},"end":{"line":363,"column":1}},"key":"YsINLNOIv0"},{"type":"paragraph","position":{"start":{"line":364,"column":1},"end":{"line":367,"column":1}},"children":[{"type":"text","value":"Der R²-Score auf den Trainingsdaten ist nahezu perfekt (1.0), während der Score\nauf den Testdaten deutlich niedriger ist (0.6). Dies ist ein klares Zeichen für\nOverfitting. Das Modell hat die Trainingsdaten auswendig gelernt, kann aber\nschlecht auf neue Daten verallgemeinern.","position":{"start":{"line":364,"column":1},"end":{"line":364,"column":1}},"key":"ZFBkfP4z9I"}],"key":"gCFyrilSZS"}],"class":"tip dropdown","key":"SrXbM85WKz"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"ML-Modell: Random Forest","position":{"start":{"line":370,"column":1},"end":{"line":370,"column":1}},"key":"xvPb5XtZ2Y"}],"key":"H3ZPml9YSE"},{"type":"paragraph","position":{"start":{"line":373,"column":1},"end":{"line":375,"column":1}},"children":[{"type":"text","value":"Trainieren Sie nun einen Random Forest (RandomForestRegressor) mit 100 Bäumen\nauf denselben Daten. Berechnen Sie wieder die R²-Scores für Training und Test.\nWie unterscheiden sich die Ergebnisse vom einzelnen Entscheidungsbaum?","position":{"start":{"line":373,"column":1},"end":{"line":373,"column":1}},"key":"Q2JjKXdMyJ"}],"key":"SQKDLHfg73"}],"class":"tip","key":"Cmya8QZW97"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Lösung","position":{"start":{"line":378,"column":1},"end":{"line":378,"column":1}},"key":"mqElsiDgj9"}],"key":"b3fwZJt1GM"},{"type":"code","lang":"python","value":"from sklearn.ensemble import RandomForestRegressor\n\nmodell_rf = RandomForestRegressor(n_estimators=100, random_state=42)\nmodell_rf.fit(X_train, y_train)\n\nr2_train_rf = modell_rf.score(X_train, y_train)\nr2_test_rf = modell_rf.score(X_test, y_test)\n\nprint(f'R²-Score Random Forest (Training): {r2_train_rf:.2f}')\nprint(f'R²-Score Random Forest (Test): {r2_test_rf:.2f}')","position":{"start":{"line":381,"column":1},"end":{"line":392,"column":1}},"key":"MQvWKLrYKD"},{"type":"paragraph","position":{"start":{"line":393,"column":1},"end":{"line":396,"column":1}},"children":[{"type":"text","value":"Der Random Forest zeigt weniger Overfitting, er lässt sich besser\nverallgemeinern. Der R²-Score für die Trainingsdaten ist etwas geringer (0.97),\naber dafür liegt der R²-Score der Testdaten bei 0.81. Die Differenz zwischen\ndem Trainings- und dem Testscore ist kleiner.","position":{"start":{"line":393,"column":1},"end":{"line":393,"column":1}},"key":"UepfHm44UF"}],"key":"oL21vPt9m8"}],"class":"tip dropdown","key":"AFO3E7pYco"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Feature Importance","position":{"start":{"line":399,"column":1},"end":{"line":399,"column":1}},"key":"H8uroFcyeM"}],"key":"I4S5ChYpmd"},{"type":"paragraph","position":{"start":{"line":401,"column":1},"end":{"line":403,"column":1}},"children":[{"type":"text","value":"Lassen Sie sich die Feature Importance des Random-Forest-Modells ausgeben und\nvisualisieren Sie die Top 10 wichtigsten Merkmale als Balkendiagramm. Welche\nMerkmale sind am wichtigsten für die Vorhersage?","position":{"start":{"line":401,"column":1},"end":{"line":401,"column":1}},"key":"GaFtK64kZG"}],"key":"e2w0EUxvU8"}],"class":"tip","key":"AQePVNHwv7"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Lösung","position":{"start":{"line":406,"column":1},"end":{"line":406,"column":1}},"key":"dxIPA3NGje"}],"key":"cK1J1eySdC"},{"type":"code","lang":"python","value":"# Feature Importance extrahieren\nimportance = pd.DataFrame({\n    'Merkmal': X_train.columns,\n    'Feature Importance': modell_rf.feature_importances_\n}).sort_values('Feature Importance', ascending=False)\n\n# Top 10 visualisieren\ntop10 = importance.head(10)\nfig = px.bar(top10, x='Feature Importance', y='Merkmal', orientation='h',\n             title='Top 10 wichtigste Merkmale im Random Forest')\nfig.update_yaxes(autorange=\"reversed\")\nfig.show()\n\nprint(top10)","position":{"start":{"line":409,"column":1},"end":{"line":424,"column":1}},"key":"mi9LsFFdM8"},{"type":"paragraph","position":{"start":{"line":425,"column":1},"end":{"line":427,"column":1}},"children":[{"type":"text","value":"Das wichtigste Merkmal aus den vorhandenen Merkmalen ist das Einkommen. Mit\netwas Abstand kommen dann die Lage (Küstennähe Binnenland) und die Anzahl der\nPersonen pro Haushalt.","position":{"start":{"line":425,"column":1},"end":{"line":425,"column":1}},"key":"cOvj7O0F3G"}],"key":"LLviAMZcEF"}],"class":"tip dropdown","key":"xie1mN82pY"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"ML-Modell: lineare Regression","position":{"start":{"line":430,"column":1},"end":{"line":430,"column":1}},"key":"c0GO8tUwUN"}],"key":"cxYEwYoLNT"},{"type":"paragraph","position":{"start":{"line":432,"column":1},"end":{"line":434,"column":1}},"children":[{"type":"text","value":"Trainieren Sie nun ein lineares Regressionsmodell auf denselben Daten. Berechnen\nSie wieder die R²-Scores für Training und Test. Wie unterscheiden sich die\nErgebnisse vom den beiden vorherigen Modellen?","position":{"start":{"line":432,"column":1},"end":{"line":432,"column":1}},"key":"WKVKm1MW7a"}],"key":"aL5VqrviQY"},{"type":"paragraph","position":{"start":{"line":436,"column":1},"end":{"line":436,"column":1}},"children":[{"type":"text","value":"Wählen Sie dann ein finales Modell.","position":{"start":{"line":436,"column":1},"end":{"line":436,"column":1}},"key":"pLV8mbUJwq"}],"key":"fR0xrkxeEd"}],"class":"tip","key":"KBiPsVIJPQ"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Lösung","position":{"start":{"line":439,"column":1},"end":{"line":439,"column":1}},"key":"hIl3Ilpja0"}],"key":"pBL4rM31G6"},{"type":"code","lang":"python","value":"from sklearn.linear_model import LinearRegression\n\nmodell_lr = LinearRegression()\nmodell_lr.fit(X_train, y_train)\n\nr2_train_lr = modell_lr.score(X_train, y_train)\nr2_test_lr = modell_lr.score(X_test, y_test)\n\nprint(f'R²-Score lineare Regression (Training): {r2_train_lr:.2f}')\nprint(f'R²-Score lineare Regression (Test): {r2_test_lr:.2f}')","position":{"start":{"line":442,"column":1},"end":{"line":453,"column":1}},"key":"M0jI2qR5wY"},{"type":"paragraph","position":{"start":{"line":454,"column":1},"end":{"line":458,"column":1}},"children":[{"type":"text","value":"Der R²-Score der Trainingsdaten ist 0.66, für die Testdaten liegt er bei 0.58.\nAuch wenn die Differenz zwischen Trainingsscore und Testscore klein ist und wohl\nkein Overfitting vorliegt, sind die beiden Scores erheblich schlechter als beim\nRandom Forest (0.97 und 0.81). Daher verwenden wir den Random Forest als finales\nModell.","position":{"start":{"line":454,"column":1},"end":{"line":454,"column":1}},"key":"NZlpsN3GEr"}],"key":"M81VZwJIQ8"}],"class":"tip dropdown","key":"EB2vFT82SF"}],"key":"jxoRVPmu91"}],"key":"YvXNgzG49c"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"9.3 XGBoost","url":"/chapter09-sec03","group":"9. Ensemble-Methoden (Random Forests und XGBoost)"},"next":{"title":"10.1 Maximiere den Rand, aber soft","url":"/chapter10-sec01","group":"10. Support Vector Machines"}}},"domain":"http://localhost:3004"}