
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Datenvorverarbeitung &#8212; Maschinelles Lernen für Studierende der Ingenieurwissenschaften</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/exercise.css" />
    <link rel="stylesheet" type="text/css" href="../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="../_static/myadmonitions.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Modellvalidierung" href="chapter07_sec02.html" />
    <link rel="prev" title="ML-Workflow" href="chapter07_sec00.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Maschinelles Lernen für Studierende der Ingenieurwissenschaften</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Willkommen zu ML4ING
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting started...
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../chapter01/chapter01_sec00.html">
   Zu Beginn …
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter01/chapter01_sec01.html">
     Was ist maschinelles Lernen?
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter01/chapter01_sec02.html">
     Technische Voraussetzungen: Python, Anaconda und JupyterLab
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../chapter02/chapter02_sec00.html">
   Crashkurs Python (Teil 1)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter02/chapter02_sec01.html">
     Datentypen, Variablen und Vergleiche
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter02/chapter02_sec02.html">
     Bool, Vergleiche und Programmverzweigung
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter02/chapter02_sec03.html">
     Digitale Logik und Schleife mit Bedingung
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../chapter03/chapter03_sec00.html">
   Crashkurs Python (Teil 2)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter03/chapter03_sec01.html">
     Liste und Zählschleife
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter03/chapter03_sec02.html">
     Funktionen
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter03/chapter03_sec03.html">
     Objektorientierung
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Datenexploration
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../chapter04/chapter04_sec00.html">
   Pandas anstatt Excel
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter04/chapter04_sec01.html">
     Series und DataFrame
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter04/chapter04_sec02.html">
     Arbeiten mit Tabellendaten
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter04/chapter04_sec03.html">
     Statistik mit Pandas
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../chapter05/chapter05_sec00.html">
   Daten visualisieren mit Matplotlib
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter05/chapter05_sec01.html">
     Das Modul NumPy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter05/chapter05_sec02.html">
     Linien-, Balken- und Streudiagramme
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter05/chapter05_sec03.html">
     Visualisierung von DataFrames
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter05/chapter05_sec04.html">
     Optional: Histogramme
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  ML-Verfahren
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../chapter06/chapter06_sec00.html">
   Lineare und polynomiale Regression
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter06/chapter06_sec01.html">
     Lineare Regression
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter06/chapter06_sec02.html">
     Training eines linearen Regressionsmodells
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter06/chapter06_sec03.html">
     Multiple lineare Regression
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="chapter07_sec00.html">
   ML-Workflow
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Datenvorverarbeitung
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="chapter07_sec02.html">
     Modellvalidierung
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="chapter07_sec03.html">
     Das Bias-Varianz-Dilemma
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../chapter08/chapter08_sec00.html">
   Perzeptron
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter08/chapter08_sec01.html">
     Grundbaustein neuronaler Netze
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter08/chapter08_sec02.html">
     Die Perzeptron-Lernregel
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter08/chapter08_sec03.html">
     Training eines Perzeptrons mit Scikit-Learn
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../chapter09/chapter09_sec00.html">
   Logistische Regression
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter09/chapter09_sec01.html">
     Logistische Regression ersetzt Perzeptron
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter09/chapter09_sec02.html">
     Logistische Regression lernt mit Maximum-Likelihood
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter09/chapter09_sec03.html">
     Logistische Regression mit Scikit-Learn
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../chapter10/chapter10_section00.html">
   Support Vector Machine
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../chapter10/chapter10_section01.html">
     Maximiere den Rand, aber soft
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/chapter07/chapter07_sec01.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/gramschs/book_ml4ing"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/gramschs/book_ml4ing/main?urlpath=lab/tree/docs/chapter07/chapter07_sec01.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lernziele">
   Lernziele
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#fehlende-daten-aufspuren-mit-isnull">
   Fehlende Daten aufspüren mit isnull()
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loschen-mit-drop">
   Löschen mit drop()
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ersetzen-mit-fillna">
   Ersetzen mit fillna()
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#zusammenfassung">
   Zusammenfassung
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Datenvorverarbeitung</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lernziele">
   Lernziele
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#fehlende-daten-aufspuren-mit-isnull">
   Fehlende Daten aufspüren mit isnull()
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#loschen-mit-drop">
   Löschen mit drop()
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ersetzen-mit-fillna">
   Ersetzen mit fillna()
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#zusammenfassung">
   Zusammenfassung
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="datenvorverarbeitung">
<h1>Datenvorverarbeitung<a class="headerlink" href="#datenvorverarbeitung" title="Permalink to this headline">¶</a></h1>
<p>Realistische Datensätze sind oft unvollständig. In einer Umfrage hat eine Person
mit einer Frage nichts anfangen können und daher nichts angekreuzt. Ein
Messsensor an der Produktionsanlage ist abends ausgefallen, was erst am nächsten
Morgen bemerkt wurde. Die Mitarbeitenden einer Arztpraxis sind im Urlaub und
lassen die Meldung der verabreichten Impfungen noch bis nach dem Urlaub liegen.
Es gibt viele Gründe, warum Datensätze unvollständig sind. In diesem Abschnitt
beschäftigen eir uns damit, fehlende Daten aufzuspüren und lernen einfache
Methoden kennen, damit umzugehen.</p>
<div class="section" id="lernziele">
<h2>Lernziele<a class="headerlink" href="#lernziele" title="Permalink to this headline">¶</a></h2>
<div class="hint admonition">
<p class="admonition-title">Lernziele</p>
<ul class="simple">
<li><p>Sie können in einer großen Datensammlung mit <strong>isnull()</strong> fehlende Daten aufspüren.</p></li>
<li><p>Sie können Daten gezielt mit <strong>drop()</strong> löschen.</p></li>
<li><p>Sie können fehlende Daten mit <strong>fillna()</strong> ersetzen.</p></li>
<li><p>Sie wissen, dass es nicht eine <em>einzige</em> Strategie zum Umgang mit fehlenden Daten
gibt, sondern von Projekt zu Projekt entschieden werden muss.</p></li>
</ul>
</div>
</div>
<div class="section" id="fehlende-daten-aufspuren-mit-isnull">
<h2>Fehlende Daten aufspüren mit isnull()<a class="headerlink" href="#fehlende-daten-aufspuren-mit-isnull" title="Permalink to this headline">¶</a></h2>
<p>Ein erstes Beispiel eines unvollständigen Datensatzes haben wir bereits im
letzten Kapitel kennengelernt. Wir laden erneut die Tabelle mit den
Gebrauchtwagenpreisen der Jahre 2011 bis 2021.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">data_raw</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/autoscout24-germany-dataset.csv&#39;</span><span class="p">)</span>
<span class="n">data_raw</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 46405 entries, 0 to 46404
Data columns (total 9 columns):
 #   Column     Non-Null Count  Dtype  
---  ------     --------------  -----  
 0   mileage    46405 non-null  int64  
 1   make       46405 non-null  object 
 2   model      46262 non-null  object 
 3   fuel       46405 non-null  object 
 4   gear       46223 non-null  object 
 5   offerType  46405 non-null  object 
 6   price      46405 non-null  int64  
 7   hp         46376 non-null  float64
 8   year       46405 non-null  int64  
dtypes: float64(1), int64(3), object(5)
memory usage: 3.2+ MB
</pre></div>
</div>
</div>
</div>
<p>Wir hatten bereits festgestellt, dass die Anzahl der ‘non-null’-Einträge für die
verschiedenen Merkmale unterschiedlich ist. Offensichtlich ist bei manchen
Angeboten die Eigenschaft ‘model’ nicht angegeben worden. Welche das sind,
können wir mit der Methode <code class="docutils literal notranslate"><span class="pre">isnull()</span></code> bestimmen. Die Methode liefert ein Array
zurück, das True/False-Werte enthält. True steht dabei dafür, dass ein Wert
fehlt bzw. mit dem Eintrag ‘NaN’ gekennzeichnet ist (= not a number). Weitere
Details finden Sie in der <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.isnull.html">Pandas-Dokumentation →
isnull</a>.</p>
<p>Dieses boolesche Array können wir dann wiederum als Filter einsetzen.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">filter</span> <span class="o">=</span> <span class="n">data_raw</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;model&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span>
<span class="n">data_raw</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="nb">filter</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mileage</th>
      <th>make</th>
      <th>model</th>
      <th>fuel</th>
      <th>gear</th>
      <th>offerType</th>
      <th>price</th>
      <th>hp</th>
      <th>year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>365</th>
      <td>3500</td>
      <td>Others</td>
      <td>NaN</td>
      <td>Electric</td>
      <td>Manual</td>
      <td>Used</td>
      <td>5500</td>
      <td>38.0</td>
      <td>2018</td>
    </tr>
    <tr>
      <th>2001</th>
      <td>2900</td>
      <td>Others</td>
      <td>NaN</td>
      <td>Electric</td>
      <td>Automatic</td>
      <td>Used</td>
      <td>7900</td>
      <td>5.0</td>
      <td>2018</td>
    </tr>
    <tr>
      <th>2009</th>
      <td>60866</td>
      <td>Opel</td>
      <td>NaN</td>
      <td>Gasoline</td>
      <td>Manual</td>
      <td>Used</td>
      <td>12290</td>
      <td>82.0</td>
      <td>2019</td>
    </tr>
    <tr>
      <th>2019</th>
      <td>3550</td>
      <td>Opel</td>
      <td>NaN</td>
      <td>Gasoline</td>
      <td>Manual</td>
      <td>Used</td>
      <td>15800</td>
      <td>110.0</td>
      <td>2019</td>
    </tr>
    <tr>
      <th>2496</th>
      <td>3000</td>
      <td>Audi</td>
      <td>NaN</td>
      <td>Electric</td>
      <td>Automatic</td>
      <td>Demonstration</td>
      <td>172450</td>
      <td>598.0</td>
      <td>2021</td>
    </tr>
    <tr>
      <th>2557</th>
      <td>104574</td>
      <td>MINI</td>
      <td>NaN</td>
      <td>Gasoline</td>
      <td>Manual</td>
      <td>Used</td>
      <td>10490</td>
      <td>184.0</td>
      <td>2013</td>
    </tr>
    <tr>
      <th>2843</th>
      <td>25</td>
      <td>Baic</td>
      <td>NaN</td>
      <td>Gasoline</td>
      <td>Automatic</td>
      <td>Used</td>
      <td>20900</td>
      <td>136.0</td>
      <td>2018</td>
    </tr>
    <tr>
      <th>3507</th>
      <td>39500</td>
      <td>9ff</td>
      <td>NaN</td>
      <td>Gasoline</td>
      <td>Manual</td>
      <td>Used</td>
      <td>7000</td>
      <td>20.0</td>
      <td>2018</td>
    </tr>
    <tr>
      <th>4310</th>
      <td>46597</td>
      <td>Volkswagen</td>
      <td>NaN</td>
      <td>Electric</td>
      <td>Automatic</td>
      <td>Used</td>
      <td>10490</td>
      <td>82.0</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>4620</th>
      <td>27785</td>
      <td>Lexus</td>
      <td>NaN</td>
      <td>Electric/Gasoline</td>
      <td>Automatic</td>
      <td>Used</td>
      <td>35990</td>
      <td>197.0</td>
      <td>2019</td>
    </tr>
    <tr>
      <th>4749</th>
      <td>94777</td>
      <td>Skoda</td>
      <td>NaN</td>
      <td>Gasoline</td>
      <td>Manual</td>
      <td>Used</td>
      <td>9999</td>
      <td>90.0</td>
      <td>2015</td>
    </tr>
    <tr>
      <th>4907</th>
      <td>100000</td>
      <td>Alpine</td>
      <td>NaN</td>
      <td>Gasoline</td>
      <td>NaN</td>
      <td>Used</td>
      <td>7000</td>
      <td>136.0</td>
      <td>2012</td>
    </tr>
    <tr>
      <th>5321</th>
      <td>182982</td>
      <td>Mercedes-Benz</td>
      <td>NaN</td>
      <td>Diesel</td>
      <td>Manual</td>
      <td>Used</td>
      <td>9490</td>
      <td>136.0</td>
      <td>2012</td>
    </tr>
    <tr>
      <th>5751</th>
      <td>193000</td>
      <td>Citroen</td>
      <td>NaN</td>
      <td>Gasoline</td>
      <td>Automatic</td>
      <td>Used</td>
      <td>4990</td>
      <td>156.0</td>
      <td>2012</td>
    </tr>
    <tr>
      <th>5902</th>
      <td>50</td>
      <td>Volkswagen</td>
      <td>NaN</td>
      <td>Diesel</td>
      <td>Automatic</td>
      <td>Demonstration</td>
      <td>62950</td>
      <td>150.0</td>
      <td>2021</td>
    </tr>
    <tr>
      <th>7377</th>
      <td>3000</td>
      <td>Audi</td>
      <td>NaN</td>
      <td>Electric</td>
      <td>Automatic</td>
      <td>Demonstration</td>
      <td>172450</td>
      <td>598.0</td>
      <td>2021</td>
    </tr>
    <tr>
      <th>7512</th>
      <td>89900</td>
      <td>Caravans-Wohnm</td>
      <td>NaN</td>
      <td>Diesel</td>
      <td>Manual</td>
      <td>Used</td>
      <td>15990</td>
      <td>102.0</td>
      <td>2017</td>
    </tr>
    <tr>
      <th>8293</th>
      <td>115805</td>
      <td>Skoda</td>
      <td>NaN</td>
      <td>Gasoline</td>
      <td>Automatic</td>
      <td>Used</td>
      <td>8990</td>
      <td>122.0</td>
      <td>2014</td>
    </tr>
    <tr>
      <th>9033</th>
      <td>25387</td>
      <td>Alpine</td>
      <td>NaN</td>
      <td>Gasoline</td>
      <td>Automatic</td>
      <td>Used</td>
      <td>53990</td>
      <td>252.0</td>
      <td>2019</td>
    </tr>
    <tr>
      <th>9264</th>
      <td>5</td>
      <td>Aixam</td>
      <td>NaN</td>
      <td>Electric</td>
      <td>Automatic</td>
      <td>Pre-registered</td>
      <td>22180</td>
      <td>NaN</td>
      <td>2021</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Scheinbar fehlt die Modellangabe häufig, wenn das Fahrzeug mit Gas betrieben
wird. Dem müssten wir systematisch nachgehen. Sind das vielleicht umgebaute
Fahrzeuge und fehlt deshalb die Modellangabe? Wie oft kommen gasbetriebene
Fahrzeuge überhaupt im kompletten Datensatz vor? Und wie häufig in dem Datensatz
mit den unvollständigen Angaben? Wir wenden uns aber zunächst dem Löschen der
Daten zu.</p>
</div>
<div class="section" id="loschen-mit-drop">
<h2>Löschen mit drop()<a class="headerlink" href="#loschen-mit-drop" title="Permalink to this headline">¶</a></h2>
<p>Im letzten Kapitel haben wir einfach alle Datensätze gelöscht, in denen Daten
gefehlt haben — sozusagen die Brute-Force-Methode. Wenn wir uns mehr Zeit für
die Datenvorverarbeitung nehmen, können wir aber auch filigraner vorgehen.
Beispielsweise könnten wir beschließen, dass uns das Modell als Eigenschaft
nicht so wichtig ist und somit die Spalte löschen.</p>
<p>Dazu verwenden wir die <code class="docutils literal notranslate"><span class="pre">drop()</span></code>-Methode. Standardmäßig löscht <code class="docutils literal notranslate"><span class="pre">drop()</span></code> jedoch
Zeilen. Mit der Option <code class="docutils literal notranslate"><span class="pre">columns=</span></code> können wir spaltenweise löschen, wie Sie in
der <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.drop.html">Pandas-Dokumentation →
drop</a>
nachlesen können.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_raw</span> <span class="o">=</span> <span class="n">data_raw</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">&#39;model&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="ersetzen-mit-fillna">
<h2>Ersetzen mit fillna()<a class="headerlink" href="#ersetzen-mit-fillna" title="Permalink to this headline">¶</a></h2>
<p>Auch bei den Angaben zur Schaltung fehlen Einträge. Zum Beispiel die Zeile mit
dem Index 243 ist unvollständig.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">data_raw</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">243</span><span class="p">,</span> <span class="p">:])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>mileage        93850
make         Renault
fuel          Diesel
gear             NaN
offerType       Used
price           7990
hp             110.0
year            2012
Name: 243, dtype: object
</pre></div>
</div>
</div>
</div>
<p>Diesmal entscheiden wir uns dazu, diese Eigenschaft nicht wegzulassen.
ML-Verfahren brauchen aber immer einen gültigen Wert und nicht NaN. Wir ersetzen
die fehlenden Werte durch den Eintrag ‘not defined’. Genausogut könnten wir auch
‘keine Angabe’ oder ‘nada’ oder was auch immer nehmen. Dazu benutzen wir die
Methode <code class="docutils literal notranslate"><span class="pre">fillna()</span></code> (siehe <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.fillna.html">Pandas-Dokumentation →
fillna</a>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data_raw</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;gear&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_raw</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;gear&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;not defined&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Wenn wir uns jetzt noch einmal Zeile 243 ansehen, sehen wir, dass <code class="docutils literal notranslate"><span class="pre">fillna()</span></code>
funktioniert hat.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">data_raw</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">243</span><span class="p">,:])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>mileage            93850
make             Renault
fuel              Diesel
gear         not defined
offerType           Used
price               7990
hp                 110.0
year                2012
Name: 243, dtype: object
</pre></div>
</div>
</div>
</div>
<p>Bei den PS-Zahlen haben wir ebenfalls nicht vollständige Daten vorliegen.
Diesmal haben wir nicht diskrete Werte wie ‘Schaltwagen’ oder ‘Automatik’,
sondern numerische Werte. Daher bietet es sich hier eine zweite Methode der
Ersetzung an. Wenn wir überall da, wo wir keine PS-Zahlen vorliegen haben, den
Mittelwert der vorhandenen PS-Zahlen einsetzen, machen wir zumindest den
Mittelwert des gesamten Datensatzes nicht kaputt. Besser wäre natürlich zu
versuchen, die fehlenden Daten zu recherchieren. Oder aber mittels linearer
Regression die fehlenden Werte zu schätzen und dann zu ergänzen. Als erste
Näherung nehmen wir jetzt den Mittelwert der vorhandenen Daten.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mittelwert</span> <span class="o">=</span> <span class="n">data_raw</span><span class="o">.</span><span class="n">loc</span><span class="p">[:</span> <span class="p">,</span> <span class="s1">&#39;hp&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Der Mittelwert der vorhandenen PS-Zahlen ist: </span><span class="si">{:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mittelwert</span><span class="p">))</span>

<span class="n">data_raw</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;hp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_raw</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;hp&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">mittelwert</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Der Mittelwert der vorhandenen PS-Zahlen ist: 132.99
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="zusammenfassung">
<h2>Zusammenfassung<a class="headerlink" href="#zusammenfassung" title="Permalink to this headline">¶</a></h2>
<p>Ein wichtiger Teil eines ML-Projektes beschäftigt sich mit der Aufbereitung der
Daten für die ML-Algorithmen. Dabei ist es nicht nur wichtig, in großen
Datensammlungen fehlende Einträge aufspüren zu können, sondern ein Gespür dafür
zu entwickeln, wie mit den fehlenden Daten angesetzt werden sollen. Die
Strategien hängen dabei von der Anzahl der fehlenden Daten und ihrer Bedeutung
ab. Häufig werden unvollständige Daten aus der Datensammlung gelöscht oder
numerische Einträge durch den Mittelwert der vorhandenen Daten ersetzt.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "gramschs/book_ml4ing",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./chapter07"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="chapter07_sec00.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">ML-Workflow</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="chapter07_sec02.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Modellvalidierung</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Simone Gramsch<br/>
    
      <div class="extra_footer">
        <div>
<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img class="license" alt="Creative Commons License" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a> This book is licensed under a <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons BY-NC-SA 4.0 License</a>.
</div>

      </div>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>